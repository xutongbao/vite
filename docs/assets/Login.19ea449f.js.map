{"version":3,"file":"Login.19ea449f.js","sources":["../../src/components/light/Icon.vue","../../src/views/light/login/Login.vue"],"sourcesContent":["<template>\r\n  <span\r\n    :class=\"`icon iconfont icon-${name} ${className}`\"\r\n    @click=\"handleClick\"\r\n  ></span>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineProps, defineEmit } from \"vue\"\r\n\r\nconst props = defineProps({\r\n  name: {\r\n    type: String,\r\n    default: \"\",\r\n  },\r\n  className: {\r\n    type: String,\r\n    default: \"\",\r\n  },\r\n})\r\n\r\nconst emit = defineEmit([\"onClick\"])\r\n\r\nconst handleClick = () => {\r\n  emit(\"onClick\")\r\n}\r\n\r\n</script>\r\n\r\n<style></style>\r\n","<template>\r\n  <div>\r\n    <input v-model=\"username\" :ref=\"handleUsernameRef\" autofocus />\r\n  </div>\r\n  <div>\r\n    <input v-model=\"password\" :type=\"visible ? 'text' : 'password'\" @keyup.enter=\"handleLogin\" />\r\n    <Icon\r\n      :name=\"visible ? 'show' : 'hide'\"\r\n      className=\"m-login-icon\"\r\n      @onClick=\"handleVisible\"\r\n    ></Icon>\r\n  </div>\r\n  <button @click=\"handleLogin\">登录</button>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, toRefs, onMounted } from \"vue\"\r\nimport { useRouter } from 'vue-router'\r\nimport Icon from \"@/components/light/Icon.vue\"\r\nimport Api from '@/api'\r\n\r\nconst state = reactive({\r\n  username: \"admin\",\r\n  password: \"123456\",\r\n  visible: false,\r\n})\r\n\r\nconst router = useRouter()\r\n\r\nconst { username, password, visible } = toRefs(state)\r\n\r\nconst handleVisible = () => {\r\n  state.visible = !state.visible\r\n}\r\n\r\nconst handleLogin = () => {\r\n  const { username, password } = state\r\n  Api.light.login({ username, password }).then((res) => {\r\n    if (res.code === 200) {\r\n      router.push(\"/light/index/home\")\r\n    }\r\n  })\r\n}\r\n\r\nlet usernameRef\r\nconst handleUsernameRef = (el) => {\r\n  usernameRef = el\r\n}\r\n\r\nonMounted(() => {\r\n  usernameRef.focus()\r\n})\r\n</script>\r\n\r\n<style></style>\r\n"],"names":["handleClick","state","reactive","username","password","visible","router","useRouter","toRefs","handleVisible","handleLogin","light","login","then","res","code","push","usernameRef","handleUsernameRef","el","focus"],"mappings":"2QAuBMA,EAAc,OACb,8ICHDC,EAAQC,EAAS,CACrBC,SAAU,QACVC,SAAU,SACVC,SAAS,IAGLC,EAASC,KAETJ,SAAEA,WAAUC,UAAUC,GAAYG,EAAOP,GAEzCQ,EAAgB,OACdJ,SAAWJ,EAAMI,SAGnBK,EAAc,WACVP,WAAUC,YAAaH,IAC3BU,MAAMC,MAAM,CAAET,WAAUC,aAAYS,MAAMC,IAC3B,MAAbA,EAAIC,QACCC,KAAK,6BAKdC,QACEC,EAAqBC,MACXA,aAGN,OACIC"}